function Game(t){this.generateFood=function(){let t=[],s=0;b=CANVAS_DIMENSION_SNAKE/RESOLUTION;for(let e=1;e<b-1;e++)for(let i=1;i<b-1;i++){skip=!1;for(let t=0;t<this.snake.body.length;t++)if(ii=this.snake.body[t][0],jj=this.snake.body[t][1],ii==e&&jj==i){skip=!0;break}skip||(t[s++]=[e,i])}return t=shuffle(t),t[0]},this.getBrain=function(){return this.brain},this.update=function(){if(!this.endGame){switch(snake_state=this.snake.update(),snake_state){case IS_DEAD:this.endGame=!0;break;case FOOD_WAS_EATEN:this.apples++,this.maxSteps+=BASE_MAX_STEPS,this.food=this.generateFood(),this.snake.setFood(this.food)}if(this.steps++,null==this.food||this.steps==this.maxSteps)return void(this.endGame=!0)}},this.drawFood=function(){fill(200,0,0),rect(this.food[1]*RESOLUTION,this.food[0]*RESOLUTION,RESOLUTION,RESOLUTION)},this.drawBorder=function(){fill(30),noStroke();let t=CANVAS_DIMENSION_SNAKE/RESOLUTION;for(let s=0;s<t;s++)rect(s*RESOLUTION,0,RESOLUTION,RESOLUTION),rect(0,s*RESOLUTION,RESOLUTION,RESOLUTION),rect(s*RESOLUTION,(t-1)*RESOLUTION,RESOLUTION,RESOLUTION),rect((t-1)*RESOLUTION,s*RESOLUTION,RESOLUTION,RESOLUTION)},this.drawGame=function(){background(255),this.drawBorder(),this.snake.drawSnake(),null!=this.food&&this.drawFood(),this.printStatistics(),this.endGame&&(fill(255,0,0),text("GAME OVER",CANVAS_DIMENSION_SNAKE/2-32,CANVAS_DIMENSION_SNAKE/2),noLoop())},this.printStatistics=function(){noStroke(),s="steps: "+this.steps,text(s,RESOLUTION+10,RESOLUTION+15),s="apples: "+this.apples,text(s,RESOLUTION+10,RESOLUTION+30)},this.getSnakeSize=function(){return this.snake.getSize()},this.getApples=function(){return this.apples},this.getSnake=function(){return this.snake},this.steps=0,this.apples=0,this.brain=t,this.maxSteps=BASE_MAX_STEPS,this.snake=new Snake([CANVAS_DIMENSION_SNAKE/2/RESOLUTION,CANVAS_DIMENSION_SNAKE/2/RESOLUTION],this.brain),this.endGame=!1,this.food=this.generateFood(),this.snake.setFood(this.food)}